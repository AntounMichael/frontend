<h3>{{t "learnerGroups.editingGroup" titleBinding=title}}</h3>
<section id='learner-group-title' class='full-width'>
  <label {{bind-attr for="view.titleField.elementId"}}>{{t "general.title"}}</label>
  {{view Ember.TextField value=bufferedTitle viewName="titleField"}}
</section>
<fieldset id='learner-group-learners'>
  <legend>{{t 'learnerGroups.learners'}} <span class="badge">{{users.length}}</span></legend>
  {{#if users.length}}
    {{input type='text' value=userFilter placeholder='Filter by name or email'}}
    <table class='grid-table'>
      <thead>
        <tr>
          <th>{{t 'learnerGroups.learnerName'}}</th>
          <th>{{t 'general.email'}}</th>
          <th>{{t 'general.actions'}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each filteredUsers}}
          <tr>
            <td>{{fullName}}</td>
            <td>{{email}}</td>
            <td><button {{action 'removeLearner' this}}>{{t 'general.remove'}}</button></td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{/if}}
  {{#modal-dialog titleTranslation="learnerGroups.addLearner" openDialogButtonTextTranslation='learnerGroups.addLearner'}}
    <section>
      <div class="search-bar">
        <div class="search-and-submit">
          {{input action="searchLearners" type="search" value=searchTerm placeholderTranslation="learnerGroups.searchLearners"}}
          <button {{translateAttr title="learnerGroups.searchLearners"}} {{action 'searchLearners'}} type="submit">
            {{fa-icon 'search'}}
          </button>
        </div>
      </div>
      {{#if showResults}}
        {{#if hasResults}}
          <ul>
            {{#each searchResults}}
              {{render 'learnergroups/learnerResult' this}}
            {{/each}}
          </ul>
        {{else}}
          <p>{{t "learnerGroups.noSearchResults"}}</p>
        {{/if}}
      {{/if}}
    </section>
  {{/modal-dialog}}
</fieldset>

<fieldset>
  <legend>{{t 'learnerGroups.relatedCourses'}} <span class="badge">{{courses.length}}</span></legend>
  {{#if courses.length}}
    {{input type='text' value=courseFilter placeholder='Filter by title'}}
  {{/if}}
  <ul>
    {{#each course in filteredCourses}}
      <li>{{course.title}}</li>
    {{/each}}
  </ul>
</fieldset>
{{#if isDirty}}
  <button {{action 'save'}}>{{t "general.save"}}</button>
{{/if}}
