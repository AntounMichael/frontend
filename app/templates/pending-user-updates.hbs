<section class='fullwidth main-border'>
  <div class="filter-tools">
    <div id='schoolsfilter' class="filter">
      <label class="inline-label">
        {{fa-icon 'university'}}
      </label>
      <div id="school-selection" class="inline-data">
        {{#if hasMoreThanOneSchool}}
          <select onchange={{action "changeSelectedSchool" value="target.value"}}>
            {{#each sortedSchools as |school|}}
              <option value={{school.id}} selected={{is-equal school selectedSchool}}>
                {{school.title}}
              </option>
            {{/each}}
          </select>
        {{else}}
          {{selectedSchool.title}}
        {{/if}}
      </div>
    </div>

    <div id='titlefilter' class="filter">
      <input type='text' value={{filter}} placeholder={{t 'admin.pendingUserUpdates.filterBy'}} oninput={{action (mut filter) value="target.value"}} />
    </div>
  </div>

  <section class='resultslist'>

    {{#liquid-if allUpdates.isFulfilled}}
      <div class='resultslist-list'>

        {{pagedlist-controls
          offset=offset
          limit=limit
          total=allUpdates.length
          setOffset=(action (mut offset))
          setLimit=(action (mut limit))
        }}
        <table>
          <thead>
            <tr>
              <th class='text-left' colspan=1></th>
              <th class='text-left' colspan=2>{{t 'user.fullName'}}</th>
              <th class='text-left' colspan=5>{{t 'general.description'}}</th>
              <th class='text-left' colspan=1>{{t 'general.actions'}}</th>

            </tr>
          </thead>
          <tbody>
            {{#each displayedUpdates as |update|}}
              <tr class="{{unless update.user.enabled 'disabled-user-account'}}">
                <td class='text-left user-status' colspan=1>
                  {{#unless update.user.enabled}}
                    {{fa-icon 'user-times' title=(t 'general.disabled')}}
                  {{/unless}}
                </td>
                <td class='text-left' colspan=2>{{#link-to 'user' update.user}}{{update.user.fullName}}{{/link-to}}</td>

                <td class='text-left' colspan=5>
                  {{t
                    (concat 'admin.pendingUserUpdates.' update.type)
                    property=update.property
                    value=update.value
                  }}
                </td>
                <td colspan="1">
                  {{#if (eq update.type 'emailMismatch')}}
                    {{fa-icon 'check' class='yes clickable' click=(action 'updateEmailAddress' update)}}
                  {{/if}}
                  {{fa-icon 'minus-square' class='no clickable' click=(action 'excludeFromSync' update)}}
                  {{fa-icon 'times' class='no clickable' click=(action 'disableUser' update)}}

                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>

        {{pagedlist-controls
          offset=offset
          limit=limit
          total=allUpdates.length
          setOffset=(action (mut offset))
          setLimit=(action (mut limit))
        }}
      </div>
    {{else}}
      {{wave-loader}}
    {{/liquid-if}}
  </section>
</section>
