<section class='calendar-controls'>
  <div class='calendar-options-control showfilters'>
    {{toggle-wide
      value=showFilters
      onLabel='dashboard.showFilters'
      offLabel='dashboard.hideFilters'
      action='toggleShowFilters'
    }}
  </div>
  <div class='calendar-options-control togglemyschedule'>
    {{toggle-wide
      value=mySchedule
      onLabel='dashboard.mySchedule'
      offLabel='dashboard.allEvents'
      action='toggleMySchedule'
    }}
  </div>
  {{#if showFilters}}
    <div class='calendar-options-control togglecoursefilters'>
      {{toggle-wide
        value=courseFilters
        onLabel='dashboard.courseOrType'
        offLabel='dashboard.topicOrDetail'
        action='toggleCourseFilters'
      }}
    </div>
  {{/if}}
  <div class='calendar-options-control calendar-school-picker'>
    {{fa-icon 'university'}} 
    {{#if hasMoreThanOneSchool}}
      <select {{action 'pickSchool' on='change'}}>
        {{#each schools as |school|}}
          <option value="{{school}}" selected={{is-equal school selectedSchool}}>
            {{school.title}}
          </option>
        {{/each}}
      </select>
    {{else}}
      {{selectedSchool.title}}
    {{/if}}
  </div>
  <div class='calendar-filters'>
    {{#liquid-if showFilters class='vertical'}}
      {{#liquid-if courseFilters class='crossFade'}}
        <div class='calendar-filter-list large-filter-list coursefilter'>
          {{t 'general.courses'}}
          <ul>
            {{#each courses as |course|}}
              <li class='clickable' {{action 'toggleCourse' course}}>
                {{boolean-check value=(is-in selectedCourses course)}}
                {{course.title}}
              </li>
            {{/each}}
          </ul>
        </div>

        <div class='calendar-filter-list sessiontypefilter'>
          {{t 'dashboard.sessionTypes'}}
          <ul>
            {{#each sessionTypes as |type|}}
              <li class='clickable' {{action 'toggleSessionType' type}}>
                {{boolean-check value=(is-in selectedSessionTypes type)}}
                {{type.title}}
              </li>
            {{/each}}
          </ul>
        </div>
      {{else}}        
        <div class='calendar-filter-list topicfilter'>
          {{t 'general.topics'}}
          <ul>
            {{#each topics as |topic|}}
              <li class='clickable' {{action 'toggleTopic' topic}}>
                {{boolean-check value=(is-in selectedTopics topic)}}
                {{topic.title}}
              </li>
            {{/each}}
          </ul>
        </div>
        
        <div class='calendar-filter-list sessiontypefilter'>
          {{t 'dashboard.sessionTypes'}}
          <ul>
            {{#each sessionTypes as |type|}}
              <li class='clickable' {{action 'toggleSessionType' type}}>
                {{boolean-check value=(is-in selectedSessionTypes type)}}
                {{type.title}}
              </li>
            {{/each}}
          </ul>
        </div>
        <div class='calendar-filter-list small-filter-list courselevelfilter'>
          {{t 'dashboard.courseLevels'}}
          <ul>
            {{#each courseLevels as |level|}}
              <li class='clickable' {{action 'toggleCourseLevel' level}}>
                {{boolean-check value=(is-in selectedCourseLevels level)}}
                {{level}}
              </li>
            {{/each}}
          </ul>
        </div>
        <div class='calendar-filter-list large-filter-list cohortfilter'>
          {{t 'dashboard.programAndCohort'}}
          <ul>
            {{#each cohorts as |cohort|}}
              <li class='clickable' {{action 'toggleCohort' cohort}}>
                {{boolean-check value=(is-in selectedCohorts cohort)}}
                {{cohort.displayTitle}} {{cohort.programYear.program.title}}
              </li>
            {{/each}}
          </ul>
        </div>
      {{/liquid-if}}   
    {{/liquid-if}}
  </div>
  <ul class='inline calendar-view-picker'>
    <li class='clickable' {{action 'setView' 'day'}}>{{t 'calendar.day'}}</li>
    <li class='clickable' {{action 'setView' 'week'}}>{{t 'calendar.week'}}</li>
    <li class='clickable' {{action 'setView' 'month'}}>{{t 'calendar.month'}}</li>
  </ul>

  {{#if isEventView class='crossFade'}}
    <span class='calendar-back clickable link' {{action 'clearEvent'}}>
      {{t 'calendar.backToCalendar'}}
    </span>
  {{else}}
    <ul class='inline calendar-time-picker'>
      <li class='clickable' {{action 'goBack'}}>{{fa-icon 'angle-left'}}</li>
      <li class='clickable' {{action 'gotoToday'}}>{{t 'calendar.today'}}</li>
      <li class='clickable' {{action 'goForward'}}>{{fa-icon 'angle-right'}}</li>
    </ul>
  {{/if}}

</section>

<section class='fullwidth'>
  {{user-events-calendar
    calendarEvents=filteredEvents
    date=calendarDate
    view=selectedView
  }}
</section>
