<section class='programyears'>
  <div class="header">
    <div class='actions'>
      {{expand-collapse-button value=editorOn action="toggleEditor"}}
    </div>
  </div>
  <section class='new'>
    {{#if editorOn}}
      {{new-programyear availableAcademicYears=availableAcademicYears save=(action 'save') cancel=(action 'cancel')}}
    {{/if}}

    {{#if saved}}
      <div class='savedprogramyear'>
        {{#link-to 'programYear.index' program savedProgramYear}}
          {{fa-icon 'external-link-square'}} {{savedProgramYear.academicYear}}
        {{/link-to}}
        {{t 'general.savedSuccessfully'}}
      </div>
    {{/if}}
  </section>
  <div class='list'>
    {{#if sortedContent.length}}
      <table>
        <thead>
          <tr>
            <th class='text-left'>{{t 'programs.matriculationYear'}}</th>
            <th class='text-left' >{{t 'general.cohort'}}</th>
            <th class='text-left' >{{t 'general.competencies'}}</th>
            <th class='text-left' >{{t 'general.objectives'}}</th>
            <th class='text-left' >{{t 'general.directors'}}</th>
            <th class='text-left' >{{t 'general.terms'}}</th>
            <th class='text-center' >{{t 'general.status'}}</th>
            <th class='text-center' >{{t 'general.actions'}}</th>
          </tr>
        </thead>
        <tbody>
          {{#each proxiedProgramYears as |programYearProxy|}}
            <tr class="{{if programYearProxy.showRemoveConfirmation 'confirm-removal'}}">
              <td class='text-left'>
                {{#link-to 'programYear.index' program programYearProxy.content}}
                  {{fa-icon 'external-link-square'}} {{programYearProxy.academicYear}}
                {{/link-to}}
              </td>
              <td class='text-left'>{{programYearProxy.cohort.displayTitle}}</td>

              <td class='text-left'>
                {{#if programYearProxy.competencies.length}}
                  {{programYearProxy.competencies.length}}
                {{else}}
                  {{fa-icon 'warning' classNames='warning'}}
                {{/if}}
              </td>
              <td class='text-left'>
                {{#if programYearProxy.objectives.length}}
                  {{programYearProxy.objectives.length}}
                {{else}}
                  {{fa-icon 'warning' classNames='warning'}}
                {{/if}}
              </td>
              <td class='text-left'>
                {{#if programYearProxy.directors.length}}
                  {{programYearProxy.directors.length}}
                {{else}}
                  {{fa-icon 'warning' classNames='warning'}}
                {{/if}}
              </td>
              <td class='text-left'>
                {{#if programYearProxy.terms.length}}
                  {{programYearProxy.terms.length}}
                {{else}}
                  {{fa-icon 'warning' classNames='warning'}}
                {{/if}}
              </td>

              <td class='text-center'>{{publication-status item=programYearProxy.content showIcon=false}}</td>
              <td class='text-center'>
                {{#link-to 'programYear.index' program programYearProxy.content class="program-year-link edit"}}{{fa-icon 'edit'}}{{/link-to}}
                <span class="clickable remove {{if programYearProxy.showRemoveConfirmation 'confirm-removal'}}" {{action 'remove' programYearProxy}}>{{fa-icon 'trash'}}</span>
              </td>
            </tr>

            {{#if programYearProxy.showRemoveConfirmation}}
              <tr class='confirm-removal'>
                <td colspan=8>
                  <div class='confirm-message'>
                    {{t 'programYears.confirmRemove' courseCount=programYearProxy.cohort.courses.length}} <br />
                    <div class="confirm-buttons">
                      <button {{action 'confirmRemove' programYearProxy}} class='remove text'>{{t 'general.yes'}}</button>
                      <button {{action 'cancelRemove' programYearProxy}} class='done text'>{{t 'general.cancel'}}</button>
                    </div>
                  </div>
                </td>
              </tr>
            {{/if}}
          {{/each}}
        </tbody>
      </table>
    {{else}}
      <span class="default-message">{{t 'programs.noProgramYears'}}</span>
    {{/if}}
  </div>
</section>
